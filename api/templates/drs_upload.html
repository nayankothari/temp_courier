{% extends 'base.html' %}{% block title %}Upload DRS{% endblock title %}{% load static %}{% block content %}

<div class="container back_color">
    <div class="row">
        <div class="card mt-4">
            <div class="col-12">
                <div class="card-header">
                    Upload DRS
                </div>
                <div class="card-body">
                    <form action="" method="post">
                        {% csrf_token %}
                        <div class="row justify-content-center">
                            <p class="text-center text-decoration-underline"><b>DRS No. {{ header.drs_no }}</b></p>
                            <div class="col-md-4">
                                <label for="datetime"><b>DRS Date</b>
                                    <span class="red_color">*</span>
                                </label>
                                <input type="date" id="datetime" name="datetime" class="form-control" name="date-field" />
                            </div>
                            <div class="col-md-4">
                                <label for="area_name"><b>Area Name</b>
                                    <span class="red_color">*</span>
                                </label>
                                <select class="form-select control-label" name="area_name" id="area_name" aria-label="Area Name" required>                                                
                                    <option value="{{ header.area_name.id }}">{{ header.area_name }}</option>                                                
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="delivery_boy"><b>Delivery boy</b>
                                    <span class="red_color">*</span>
                                </label>
                                <select class="form-select control-label" name="delivery_boy" id="delivery_boy" aria-label="Area Name" required>                                                
                                    <option value="{{ header.deliveryboy_name.id }}">{{ header.deliveryboy_name }}</option>                                    
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-2">
        <div class="card mt-4">
            <div class="col-12">
                <div class="card-header">
                    DRS Details
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table" id="DrsTable">
                            <thead>
                                <tr>
                                    <th scope="col">Docket No.</th>
                                    <th scope="col">Origin</th>
                                    <th scope="col">Consignee Name</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Reason</th>
                                </tr>
                            </thead>
                            <tbody id="tbody">
                                {% for drs in drs_history %}
                                <tr>
                                    <td>{{ drs.docket_number }}</td>
                                    <td>{{ drs.origin }}</td>
                                    <td>{{ drs.consignee_name }}</td>
                                    <td>
                                        <select class="form-select control-label" name="parcel_status" id="parcel_status" aria-label="Area Name" required>
                                            {% for status in all_parcel_status %}                                                
                                            <option value="{{ status.id }}">{{ status.name }}</option>                                            
                                            {% endfor %}  
                                            <option selected="selected" value="{{ delivered_status.id }}">{{ delivered_status.name }}</option>
                                        </select>
                                    </td>
                                    <td>
                                        <input type="text" name="reason" id="reason" class="form-control">
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-3 justify-content-center">
        <div class="col-12 text-center mb-3">
            <button type="button" class="btn btn-success" id="save_drs">Save</button>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $("#datetime").val("{{ header.date|date:'Y-m-d' }}");
    });
</script>

{% endblock content %}